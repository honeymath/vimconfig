
" Vundle Settings

set nocompatible              " be iMproved, required
filetype off                  " required
syntax on

:cd C:\Tom Huh\Repositories
:e readme.md

"set guifont=Courier_New:h24

"set guifont=NotoSansMono:h24

" Always use utf-8
set encoding=utf-8

" Main font: Consolas is better than Courier_New
set guifont=Consolas:h14

" Wide font for CJK or missing symbols
set guifontwide=SimSun:h14

:nnoremap <M-x> :execute "!start cmd.exe /K cd /d \"" . expand('%:p:h') . "\""<CR>
"au BufWritePost * silent !(git add %:p)
"autocmd BufWritePost * execute 'silent !git add "' . expand('%') . '"'

autocmd BufWritePost * call system('cd /d "' . expand('%:p:h') . '" && git add "' . expand('%:t') . '"')

"autocmd BufWritePost * call system('git add "' . expand('%:p') . '"')



set jumpoptions+=stack
autocmd BufEnter "C:\Tom Huh\Repositories\readme.md" clearjumps
:nnoremap \ :call EnterPath()<CR>
function! EnterPath()
  let l:line = getline('.')
  if l:line =~ '\[\zs.*\ze\](\zs[^)]\+\ze)'  " Markdown style
    let l:path = matchstr(l:line, '\[\zs.*\ze\](\zs[^)]\+\ze)')
  elseif l:line =~ '\\input{\zs[^}]\+\ze}'  " LaTeX \input style
    let l:path = matchstr(l:line, '\\input{\zs[^}]\+\ze}')
    let l:path = substitute(l:path, '\.tex$', '', '')  " Remove .tex if it exists
    let l:path = l:path . '.tex'  " Always add .tex explicitly
  else
    echo "No matching path found"
    return
  endif
  let l:dir = fnamemodify(l:path, ':h')
  if !isdirectory(l:dir)
    call mkdir(l:dir, 'p')
    echo "Created: " . l:dir
  else
    echo "Directory already exists"
  endif
  execute 'edit' fnameescape(expand('%:p:h') . '/' .l:path)
endfunction



function! SmartCtrlO()
  " Get the current position in the jumplist
  " first, let try to jump for one step.
  execute "normal! \<C-o>" 
  let [jumplist, idx] = getjumplist()
  let save_cursor = getpos('.')
  while idx > 0
    let prev = jumplist[idx - 1]
    " prev is a list: [bufnr, lnum, col, text]
    let bufnr = prev['bufnr']
    if bufnr != bufnr('%')  " It's a jump to another file
      break
    endif
    " jump to the previous entry
    execute "normal! \<C-o>"
    let [jumplist, idx] = getjumplist()
  endwhile
  call setpos('.', save_cursor)  
endfunction
:map <M-\> :call SmartCtrlO()<CR>
":map <M-\> :source C:\Tom Huh\Repositories\vimconfig\escape.vim<CR>
":map \ :source C:\Tom Huh\Repositories\vimconfig\main.vim<CR>
function! BuildAndOpenPDF()
    " Start from current file's directory
    let l:dir = expand('%:p:h')

    " Loop upward until we find main.tex or reach root
    while 1
        let l:texpath = fnamemodify(l:dir . '\main.tex', ':p')
        if filereadable(l:texpath)
            break
        endif
        let l:parent = fnamemodify(l:dir, ':h')
        if l:parent == l:dir
            echo "main.tex not found!"
            return
        endif
        let l:dir = l:parent
    endwhile

    " Run pdflatex
    echo "Running pdflatex on " . l:texpath
    execute '!cmd /c "cd /d ' . shellescape(l:dir) . ' && pdflatex -interaction=nonstopmode main.tex"'

    " Open main.pdf
    let l:pdfpath = fnamemodify(l:dir . '\main.pdf', ':p')
    if filereadable(l:pdfpath)
        echo "Opening " . l:pdfpath
        execute '!start ' . shellescape(l:pdfpath)
    else
        echo "main.pdf not found!"
    endif
endfunction

" Map Alt-Z to the function
nnoremap <silent> <M-z> :call BuildAndOpenPDF()<CR>

" Map Alt-Z to the function
nnoremap <silent> <M-z> :call BuildAndOpenPDF()<CR>

"source vimconfig\enter_windows.vim


:iab AA â‹€
:iab VV â‹
:iab /\/\ â™¡
:iab [- âˆˆ
:iab \[- âˆ‰
:iab -] âˆ‹
:iab \-] âˆŒ
:iab Â¬ âŠ¥
:iab l__ âŒŠ
:iab __l âŒ‹
:iab Â¯Â¯l âŒ‰
:iab lÂ¯Â¯ âŒˆ
:iab <=> âŸº
:iab âŸ¸> âŸº
:iab => âŸ¹
autocmd FileType tex :iab <= âŸ¸
autocmd FileType python :iab <= âŸ¸  |iunabbrev <=
":iab <= âŸ¸
:iab << âŠ†
:iab nn âˆ©
:iab Ï†Ï† Ï•
:iab uu âˆª
:iab ><< âŠˆ
:iab <>> âŠ‰
:iab >>>> âŠ‡
:iab O+ â¨
:iab OX â¨‚
:iab ~= â‰…
:iab ~~ â‰ˆ
autocmd FileType tex :iab == â‰¡
autocmd FileType python :iab == â‰¡|iunabbrev ==
":iab == â‰¡
:iab â‰…-> â¥±
:iab â‰…âˆ’> â¥±
:iab ~=âŸ¶  â¥±
:iab ~=-> â¥±
:iab ~=âˆ’> â¥±
:iab ~â‰  â‰‡
:iab ?= â‰Ÿ
:iab âˆ‘âˆ‘ âˆƒ
:iab âˆâˆ âˆ€
:iab Â±Â± âˆ“
:iab (-> â†ª
:iab (âˆ’> â†ª
:iab <-) â†©
:iab <âˆ’) â†©
:iab â†) â†©
:iab ->> â† 
:iab âˆ’>> â† 
:iab <<- â†
:iab <<âˆ’ â†
:iab -> âŸ¶
:iab âˆ’> âŸ¶
":iab -> â”
:iab <- âŸµ
:iab <âˆ’ âŸµ
:iab <âˆ’> âŸµ
:iab âŸµ> â†”
":iab <- â¬… 
:iab --> â¤
:iab âˆ’-> â¤
:iab âˆ’âˆ’> â¤
:iab âŸµ- â¤Œ
":iab â¬…- â¤Œ
:iab l-> â†¦
:iab <-l â†¤
:iab lâˆ’> â†¦
:iab llv â†§
:iab lla â†¥
:iab lV â­£
:iab lv â­£
:iab lA â­¡
:iab la â­¡
:iab <> â¬¨
":iab ** â
:iab \\\ âˆ–
":iab [] âˆ
":lab lx â‹‰
":iab xl â‹Š
:iab xoo âŠ 
:iab poo âŠ

":iab^0 <BS>â°
":iab^2 <BS>Â²
":iab^3 <BS>Â³
":iab^4 <BS>â´
":iab^5 <BS>âµ
":iab^6 <BS>â¶
":iab^7 <BS>â·
":iab^8 <BS>â¸
":iab^9 <BS>â¹

":iab_0 <BS>â‚€
":iab_1 <BS>â‚
":iab_2 <BS>â‚‚
":iab_3 <BS>â‚ƒ
":iab_4 <BS>â‚„
":iab_5 <BS>â‚…
":iab_6 <BS>â‚†
":iab_7 <BS>â‚‡
":iab_8 <BS>â‚ˆ
":iab_9 <BS>â‚‰

:iab^+ <BS>âº
:iab^- <BS>â»


":iab- âˆ’

:iab_+ <BS>â‚Š
:iab_- <BS>â‚‹

:iab xx Ã—
:iab oo âš¬
:iab ,, â£
:iab UUU âˆ
:iab Ï€Ï€ Ï–


:iab bA ğ”¸
:iab bB ğ”¹
:iab bC â„‚
:iab bD ğ”»
:iab bE ğ”¼
:iab bF ğ”½
:iab bG ğ”¾
:iab bH â„
:iab bI ğ•€
:iab bJ ğ•
:iab bK ğ•‚
:iab bL ğ•ƒ
:iab bM ğ•„
:iab bN â„•
:iab bO ğ•†
:iab bP â„™
:iab bQ â„š
:iab bR â„
:iab bS ğ•Š
:iab bT ğ•‹
:iab bU ğ•Œ
:iab bV ğ•
:iab bW ğ•
:iab bX ğ•
:iab bY ğ•
:iab bZ â„¤


:iab sA ğ’œ
:iab sB â„¬
:iab sC ğ’
:iab sD ğ’Ÿ
:iab sE â„°
:iab sF â„±
:iab sG ğ’¢
:iab sH â„‹
:iab sI â„
:iab sJ ğ’¥
:iab sK ğ’¦
:iab sL â„’
:iab sM â„³
:iab sN ğ’©
:iab sO ğ’ª
:iab sP ğ’«
:iab sQ ğ’¬
:iab sR â„›
:iab sS ğ’®
:iab sT ğ’¯
:iab sU ğ’°
:iab sV ğ’±
:iab sW ğ’²
:iab sX ğ’³
:iab sY ğ’´
:iab sZ ğ’µ

:iab fkA ğ•¬
:iab fkB ğ•­
:iab fkC ğ•®
:iab fkD ğ•¯
:iab fkE ğ•°
:iab fkF ğ•±
:iab fkG ğ•²
:iab fkH ğ•³
:iab fkI ğ•´
:iab fkJ ğ•µ
:iab fkK ğ•¶
:iab fkL ğ•·
:iab fkM ğ•¸
:iab fkN ğ•¹
:iab fkO ğ•º
:iab fkP ğ•»
:iab fkQ ğ•¼
:iab fkR ğ•½
:iab fkS ğ•¾
:iab fkT ğ•¿
:iab fkU ğ–€
:iab fkV ğ–
:iab fkW ğ–‚
:iab fkX ğ–ƒ
:iab fkY ğ–„
:iab fkZ ğ–…
:iab fka ğ–†
:iab fkb ğ–‡
:iab fkc ğ–ˆ
:iab fkd ğ–‰
:iab fke ğ–Š
:iab fkf ğ–‹
:iab fkg ğ–Œ
:iab fkh ğ–
:iab fki ğ–
:iab fkj ğ–
:iab fkk ğ–
:iab fkl ğ–‘
:iab fkm ğ–’
:iab fkn ğ–“
:iab fko ğ–”
:iab fkp ğ–•
:iab fkq ğ––
:iab fkr ğ–—
:iab fks ğ–˜
:iab fkt ğ–™
:iab fku ğ–š
:iab fkv ğ–›
:iab fkw ğ–œ
:iab fkx ğ–
:iab fky ğ–
:iab fkz ğ–Ÿ

:iab ba ğ—®
:iab bb ğ—¯
:iab bc ğ—°
:iab bd ğ—±
:iab bbe ğ—²
:iab bf ğ—³
:iab bg ğ—´
:iab bh ğ—µ
:iab bi ğ—¶
:iab bj ğ—·
:iab bk ğ—¸
:iab bl ğ—¹
:iab bm ğ—º
:iab bn ğ—»
:iab bo ğ—¼
:iab bp ğ—½
:iab bq ğ—¾
:iab br ğ—¿
:iab bs ğ˜€
:iab bt ğ˜
:iab bu ğ˜‚
:iab bv ğ˜ƒ
:iab bw ğ˜„
:iab bx ğ˜…
:iab bby ğ˜†
:iab bz ğ˜‡

:iab cA ğ˜¼
:iab cB ğ˜½
:iab cC ğ˜¾
:iab cD ğ˜¿
:iab cE ğ™€
:iab cF ğ™
:iab cG ğ™‚
:iab cH ğ™ƒ
:iab cI ğ™„
:iab cJ ğ™…
:iab cK ğ™†
:iab cL ğ™‡
:iab cM ğ™ˆ
:iab cN ğ™‰
:iab cO ğ™Š
:iab cP ğ™‹
:iab cQ ğ™Œ
:iab cR ğ™
:iab cS ğ™
:iab cT ğ™
:iab cU ğ™
:iab cV ğ™‘
:iab cW ğ™’
:iab cX ğ™“
:iab cY ğ™”
:iab cZ ğ™•


:iab ğ—¯1 ğŸ™
:iab bb1 ğŸ™
:iab ğ—¯0 ğŸ˜
:iab bb0 ğŸ˜



